<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protokol Pengurusan Kesakitan | Panduan Pesakit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="../education.css">
</head>
<body><div class="main-container">
    <div id="pdf-loading">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem; margin-bottom: 20px; border: 4px solid #1565c0; border-right-color: transparent; border-radius: 50%; animation: spin .75s linear infinite;"></div>
        <div style="font-weight: bold; color: #555;">Menjana PDF...</div>
        <div style="font-size: 13px; color: #888; margin-top: 5px;">Memproses kandungan...</div>
    </div>

    <div class="header header-pain">
        <div id="inst-header-container" class="inst-header-container">
            <img id="inst-logo-img" class="inst-logo" src="" alt="Logo" style="display:none;">
            <div class="inst-info">
                <h3 id="inst-name-display"></h3>
                <p id="inst-contact-display"></p>
            </div>
        </div>
        <h1><i class="bi bi-heart-pulse-fill"></i> Pengurusan Kesakitan</h1>
        <p>Panduan untuk Pesakit & Penjaga Perawatan Paliatif</p>
    </div>

    <div class="nav-bar">
        <div id="backBtn" class="nav-link pain-theme" onclick="window.history.back()">
            <i class="bi bi-arrow-left"></i> Kembali
        </div>
        <div class="nav-link pain-theme" onclick="showQR()">
            <i class="bi bi-share-fill"></i> Kongsi
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-person-arms-up"></i> Jenis Kesakitan</h2>
        <div class="fear-grid">
            <div class="fear-card pain-card-nociceptive">
                <i class="bi bi-bandaid-fill card-icon-large"></i>
                <strong>Sakit Nosiseptif (Sakit Tisu)</strong>
                <p>Sakit biasa dari tisu (tulang, otot, organ). Rasa sakit, berdenyut, atau tajam.</p>
                <p style="margin-top:5px; font-weight:bold; background:rgba(0,0,0,0.1); padding:5px; border-radius:5px;">Rawatan Utama: Morfin</p>
            </div>
            <div class="fear-card pain-card-neuro">
                <i class="bi bi-lightning-fill card-icon-large"></i>
                <strong>Sakit Neuropatik (Sakit Saraf)</strong>
                <p>Sakit saraf akibat kerosakan. Rasa panas, menyucuk, kebas, atau renjatan elektrik.</p>
                <p style="margin-top:5px; font-weight:bold; background:rgba(0,0,0,0.1); padding:5px; border-radius:5px;">Rawatan: Amitriptyline, Gabapentin, Pregabalin, etc. </p>
            </div>
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-capsule"></i> Panduan Ubat</h2>
        <p>Ambil morfin secara berkala. Gunakan dos tambahan (PRN) <strong>sebelum sakit bermula</strong> atau sebelum prosedur (contoh: cuci luka, bergerak).</p>
        <p style="margin-top:10px;"><strong>Penjagaan Usus:</strong> Gunakan pelawas setiap hari (senna + lactulose) untuk elak sembelit.</p>
        
        <div class="side-effect">
            <strong><i class="bi bi-exclamation-triangle-fill"></i> Kesan Sampingan Perlu Dipantau</strong>
            <p>Mual bertambah teruk, terlalu mengantuk, keliru, nafas sangat perlahan, halusinasi, atau tiada buang air besar >3 hari.</p>
            <p style="margin-top:8px; font-weight:bold;">Maklumkan pasukan paliatif dengan segera.</p>
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-stars"></i> Kaedah Bukan Ubat</h2>
        <div class="rules-grid">
            <div class="rule-card">
                <div class="rule-number">1</div>
                <div class="rule-content">
                    <strong>Posisi Badan</strong>
                    <p>Gunakan bantal untuk ubah posisi dengan kerap agar lebih selesa.</p>
                </div>
            </div>
            <div class="rule-card">
                <div class="rule-number">2</div>
                <div class="rule-content">
                    <strong>Sentuhan & Suhu</strong>
                    <p>Tuam panas, urutan lembut, atau pek sejuk (uji suhu dahulu).</p>
                </div>
            </div>
            <div class="rule-card">
                <div class="rule-number">3</div>
                <div class="rule-content">
                    <strong>Gangguan Positif</strong>
                    <p>Tarik nafas dalam, muzik, atau melihat gambar keluarga.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-journal-medical"></i> Diari Kesakitan</h2>
        <p>Rekod membantu doktor melaras ubat. Catat setiap episod kesakitan.</p>
        
        <div class="diary-table">
            <table>
                <tr>
                    <th>Tarikh/Masa</th>
                    <th>Skor Sakit</th>
                    <th>Lokasi</th>
                    <th>Punca/Tindakan?</th>
                </tr>
                <tr>
                    <td>14/1 9PG</td>
                    <td>7</td>
                    <td>Belakang</td>
                    <td>Sakit masa rehat. Lega lepas ubat (Skor 2).</td>
                </tr>
                <tr>
                    <td>14/1 2PTG</td>
                    <td>6</td>
                    <td>Kaki</td>
                    <td>Sakit bila jalan. Lega lepas ubat (Skor 1).</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-telephone-fill"></i> Hubungi Pasukan Paliatif</h2>
        <ul style="padding-left:20px; color:#555;">
            <li>Skor sakit >7 walaupun ambil ubat</li>
            <li>Sakit menyucuk/panas yang baru</li>
            <li>Kesan sampingan yang teruk</li>
            <li>Pesakit resah/tidak boleh rehat</li>
        </ul>
        <div style="background:#ffebee; color:#c62828; padding:10px; border-radius:8px; margin-top:15px; text-align:center; font-weight:bold;">
            Kecemasan: Nafas terhenti - Hubungi 999
        </div>
    </div>

    <div class="action-buttons no-print">
        <button class="btn btn-pain" onclick="generateAndPrintPDF('pain-protocol-bm.pdf')">
            <i class="bi bi-printer-fill"></i> Cetak PDF
        </button>
    </div>

    <div id="qr-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeQR()">&times;</span>
            <h3 style="margin: 0 0 20px 0;">📱 Kongsi Protokol</h3>
            <div id="qrcode-wrapper-safe">
                <div id="qrcode"></div>
            </div>
            <p style="text-align: center; color: #666;">Imbas kod QR untuk lihat di telefon</p>
        </div>
    </div>

    <div id="print-area">
        <div class="print-header pain-theme">
            <h1 class="pain-theme">Protokol Pengurusan Kesakitan</h1>
            <p>Panduan Pesakit & Penjaga</p>
        </div>

        <h2>Jenis Kesakitan</h2>
        <p><strong>Nosiseptif:</strong> Sakit, berdenyut (tulang/otot). Rawatan: Morfin.</p>
        <p><strong>Neuropatik:</strong> Panas, menyucuk, renjatan elektrik. Rawatan: Amitriptyline, Gabapentin, Pregabalin, etc.</p>

        <h2>Panduan Ubat</h2>
        <ul>
            <li>Ambil morfin secara berkala. Gunakan dos tambahan (PRN) <strong>sebelum</strong> sakit menjadi teruk.</li>
            <li>Jaga sistem usus (Pelawas).</li>
            <li>Pastikan penyerapan oral baik (minum air sedikit, duduk tegak).</li>
        </ul>

        <div class="warning-box">
            <strong>Kesan Sampingan Perlu Dipantau:</strong> Terlalu mengantuk, keliru, halusinasi, atau tiada buang air besar >3 hari.<br>
            <strong>Tindakan:</strong> Maklumkan pasukan paliatif dengan segera.
        </div>

        <h2>Kaedah Bukan Ubat</h2>
        <ul>
            <li>Posisi badan dengan bantal.</li>
            <li>Tuam Panas/Sejuk (hati-hati dengan suhu).</li>
            <li>Tarik nafas dalam dan gangguan positif.</li>
        </ul>

        <h2>Diari Kesakitan</h2>
        <p>Sila rekod episod kesakitan untuk rujukan doktor.</p>
        <table style="width:100%; border:1px solid #ccc; border-collapse: collapse;">
            <thead>
                <tr style="background:#eee;">
                    <th style="border:1px solid #ccc; padding:8px;">Tarikh/Masa</th>
                    <th style="border:1px solid #ccc; padding:8px;">Skor Sakit</th>
                    <th style="border:1px solid #ccc; padding:8px;">Lokasi</th>
                    <th style="border:1px solid #ccc; padding:8px;">Punca / Tindakan Diambil</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="border:1px solid #ccc; padding:15px;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                </tr>
                <tr>
                    <td style="border:1px solid #ccc; padding:15px;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                </tr>
                <tr>
                    <td style="border:1px solid #ccc; padding:15px;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                    <td style="border:1px solid #ccc;"></td>
                </tr>
            </tbody>
        </table>

        <h2>Bila Perlu Hubungi Pasukan</h2>
        <p>Jika sakit >7 walaupun makan ubat, gejala baru muncul, atau pesakit resah.</p>
        <p style="color:red; font-weight:bold; margin-top:10px;">Kecemasan: Nafas terhenti - Hubungi 999</p>
    </div>

</div><script src="../education.js"></script>
</body>
</html>