<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemberian Subkutaneus | Panduan Pesakit</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="../education.css">

    <style>
        /* --- SUBCUT SPECIFIC STYLES (Overrides Global CSS to match Original Design) --- */
        
        /* 1. Fear Card - Keep Original Gradient (Teal/Pink) instead of Global Purple */
        .fear-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%) !important;
            color: #333 !important;
        }

        /* 2. Rule Card - Keep Original Blue instead of Global Green */
        .rule-card {
            border-left: 5px solid #0061f2 !important;
        }
        .rule-number {
            background: #0061f2 !important;
        }

        /* 3. Specific Lists & Layouts */
        .checklist-ul { padding-left: 20px; margin-top: 5px; font-size: 14px; }
        .checklist-ul li { margin-bottom: 4px; }

        .side-effect {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 20px; border-radius: 16px; border-left: 5px solid #ff8c42; margin-bottom: 24px;
        }
        .side-effect strong { color: #e74c3c; display: block; margin-bottom: 8px; font-size: 18px; }

        /* --- PDF PRINT STYLES (Specific to Subcut Layout) --- */
        #print-area {
            position: absolute; top: -9999px; left: -9999px;
            width: 794px; background: white; color: #333;
            padding: 40px; box-sizing: border-box;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            display: flex; flex-direction: column; gap: 20px;
        }
        #print-area .print-header { border-bottom: 3px solid #0061f2; padding-bottom: 10px; margin-bottom: 10px; }
        #print-area h1 { color: #0061f2; font-size: 28px; margin: 0; }
        #print-area h2 { 
            font-size: 18px; color: #2c3e50; border-bottom: 1px solid #ddd; 
            padding-bottom: 6px; margin: 15px 0 10px 0; text-transform: uppercase; letter-spacing: 0.5px;
        }
        
        .print-section { margin-bottom: 10px; }
        
        .print-warning-box {
            border: 2px solid #e74c3c; background: #fff5f5; padding: 12px 16px; 
            border-radius: 8px; color: #c0392b; display: flex; align-items: center; gap: 15px;
        }
        
        .print-prep-row { display: flex; gap: 20px; background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #e9ecef; }
        .print-prep-col { flex: 1; }
        .print-prep-col strong { color: #0061f2; display: block; margin-bottom: 6px; font-size: 15px; }
        .print-prep-col ul { margin: 0; padding-left: 20px; font-size: 13px; color: #444; }

        /* Specific Step-by-Step Print Cards */
        .print-step {
            display: flex; gap: 15px; padding: 12px; margin-bottom: 10px;
            border: 1px solid #eee; border-radius: 8px; background: #fff;
            break-inside: avoid;
        }
        .step-num {
            background: #0061f2; color: white; width: 28px; height: 28px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 14px; flex-shrink: 0; margin-top: 2px;
        }
        .step-content { flex: 1; }
        .step-content > strong { display: block; font-size: 15px; margin-bottom: 4px; color: #2c3e50; }
        .step-content p { font-size: 13px; color: #555; margin: 0; line-height: 1.4; }
        .step-imgs { display: flex; gap: 10px; flex-shrink: 0; }
        .print-img-sm { width: 90px; height: 90px; object-fit: contain; border: 1px solid #eee; border-radius: 4px; padding: 2px; background: white; }
    </style>
</head>
<body><div class="main-container">
    <div id="pdf-loading">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem; margin-bottom: 20px; border: 4px solid #0061f2; border-right-color: transparent; border-radius: 50%; animation: spin .75s linear infinite;"></div>
        <div style="font-weight: bold; color: #555;">Menjana PDF...</div>
        <div style="font-size: 13px; color: #888; margin-top: 5px;">Sedang memformat & menambah nota kaki</div>
    </div>

    <div class="header header-mbo">
        <div id="inst-header-container" class="inst-header-container">
            <img id="inst-logo-img" class="inst-logo" src="" alt="Logo" style="display:none;">
            <div class="inst-info">
                <h3 id="inst-name-display"></h3>
                <p id="inst-contact-display"></p>
            </div>
        </div>
        <h1>💉 Pemberian Subkutaneus</h1>
        <p>Panduan Rumah untuk Suntikan Subkutaneus</p>
    </div>

    <div class="nav-bar">
        <div id="backBtn" class="nav-link mbo-theme" onclick="window.history.back()">
            <i class="bi bi-arrow-left"></i> Kembali
        </div>
        <div class="nav-link mbo-theme" onclick="showQR()">
            <i class="bi bi-share-fill"></i> Kongsi
        </div>
    </div>

    <div class="section" style="padding-bottom: 10px;">
        <h2><i class="bi bi-exclamation-triangle-fill"></i> Pemeriksaan Keselamatan</h2>
        <div class="side-effect">
            <strong>⚠️ BILA PERLU HUBUNGI JURURAWAT</strong>
            <p>Jangan suntik. Hubungi jururawat segera jika kawasan port: <strong>Merah, Bengkak, Bocor Cecair, atau Sakit.</strong></p>
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-clipboard-check-fill"></i> Persediaan</h2>
        <div class="fear-grid">
            <div class="fear-card">
                <strong>1. Cuci & Semak</strong>
                <p>Basuh tangan dengan sabun dan air, keringkan dengan baik. Semak carta untuk nama ubat, jumlah dos, dan masa sejak dos terakhir.</p>
            </div>
            <div class="fear-card">
                <strong>2. Kumpulkan Barang</strong>
                <ul class="checklist-ul">
                    <li>Picagari dengan jarum</li>
                    <li>Ampul ubat</li>
                    <li>Picagari air untuk suntikan (0.5ml)</li>
                    <li>Putik kapas alkohol (Alcohol wipes)</li>
                    <li>Bekas sisa tajam (Sharps box)</li>
                </ul>
            </div>
            <img src="1.jpg" alt="Check and Gather" class="card-img">
        </div>
    </div>

    <div class="section">
        <h2><i class="bi bi-capsule-pill"></i> Langkah Suntikan</h2>
        <div class="rules-grid">
            
            <div class="rule-card">
                <div class="rule-number">1</div>
                <div class="rule-content">
                    <strong>Sedut Ubat</strong>
                    <p>Patahkan ampul (patahkan pada titik berwarna). Masukkan jarum, tarik omboh untuk sedut jumlah yang tepat. Ketuk picagari untuk buang buih, tolak omboh sedikit untuk keluarkan udara.</p>
                    <img src="2.jpg" alt="Draw Medicine Step A" class="card-img">
                </div>
            </div>

            <div class="rule-card">
                <div class="rule-number">2</div>
                <div class="rule-content">
                    <strong>Beri Ubat</strong>
                    <p>Lap penyumbat port dengan putik alkohol, tunggu 30 saat. Cucuk jarum perlahan-lahan ke dalam port. Tolak omboh <strong>perlahan-lahan</strong> sehingga kosong. Cabut jarum dengan segera.</p>
                    <img src="3.jpg" alt="Give Medicine" class="card-img">
                </div>
            </div>

            <div class="rule-card" style="border-left-color: #2ecc71 !important;">
                <div class="rule-number" style="background: #2ecc71 !important;"><i class="bi bi-check-lg"></i></div>
                <div class="rule-content">
                    <strong>Bilas & Selesai</strong>
                    <p>Cucuk jarum <strong>picagari air untuk suntikan</strong> (0.5ml) ke dalam port, tolak perlahan-lahan untuk membilas. Lap penyumbat port dengan putik alkohol. Rekod butiran pada carta. Buang semua benda tajam ke dalam bekas sisa tajam.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="action-buttons no-print">
        <button class="btn btn-mbo" onclick="generateAndPrintPDF('subcut-guide-bm.pdf')">
            <i class="bi bi-printer-fill"></i> Cetak PDF
        </button>
    </div>

    <div id="qr-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeQR()">&times;</span>
            <h3 style="margin: 0 0 20px 0;">📱 Kongsi Protokol</h3>
            <div id="qrcode-wrapper-safe">
                <div id="qrcode"></div>
            </div>
            <p style="text-align: center; color: #666;">Imbas kod QR untuk lihat di telefon bimbit</p>
        </div>
    </div>

    <div id="print-area">
        <div class="print-header">
            <h1>Pemberian Subkutaneus</h1>
            <p>Protokol Penjagaan Rumah</p>
        </div>

        <div class="print-section">
            <h2 style="color: #c0392b; border-bottom-color: #fadbd8;">Pemeriksaan Keselamatan</h2>
            <div class="print-warning-box">
                <div style="font-size: 24px;">⚠️</div>
                <div>
                    <strong style="color:#c0392b;">BILA PERLU HUBUNGI JURURAWAT</strong>
                    <p style="margin: 0; font-size: 13px;">Jangan suntik jika port: <strong>Merah, Bengkak, Bocor Cecair, atau Sakit.</strong></p>
                </div>
            </div>
        </div>

        <div class="print-section">
            <h2>Persediaan</h2>
            <div class="print-prep-row">
                <div class="print-prep-col">
                    <strong>1. Cuci & Semak</strong>
                    <p style="font-size: 13px; margin:0;">Basuh tangan dengan sabun. Semak carta untuk ubat, dos, dan masa yang betul.</p>
                </div>
                <div class="print-prep-col">
                    <strong>2. Kumpulkan Barang</strong>
                    <ul>
                        <li>Picagari dengan jarum</li>
                        <li>Ampul ubat</li>
                        <li>Air untuk suntikan (0.5ml)</li>
                        <li>Putik alkohol & Bekas sisa tajam</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="print-section">
            <h2>Prosedur Pemberian</h2>

            <div class="print-step">
                <div class="step-num">1</div>
                <div class="step-content">
                    <strong>Sedut Ubat</strong>
                    <p>Patahkan ampul. Sedut jumlah yang tepat. Ketuk untuk buang buih, keluarkan udara.</p>
                </div>
                <div class="step-imgs">
                    <img src="2.jpg" class="print-img-sm" alt="Ampoule">
                </div>
            </div>

            <div class="print-step">
                <div class="step-num">2</div>
                <div class="step-content">
                    <strong>Beri Ubat</strong>
                    <p>Lap penyumbat port dengan putik alkohol (tunggu 30s). Cucuk jarum. Suntik <strong>PERLAHAN</strong>. Cabut jarum segera.</p>
                </div>
                <div class="step-imgs">
                    <img src="3.jpg" class="print-img-sm" alt="Inject">
                </div>
            </div>

            <div class="print-step">
                <div class="step-num">3</div>
                <div class="step-content">
                    <strong>Bilas & Selesai</strong>
                    <p>Bilas dengan air untuk suntikan (0.5ml). Lap penyumbat port. Rekod masa/jumlah. Buang sisa tajam.</p>
                </div>
                <div class="step-imgs">

                </div>
            </div>
        </div>
    </div>

</div><script src="../education.js"></script>
<script src="/js/ga-tracking.js"></script>
</body>
</html>