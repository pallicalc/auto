<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagnostic Tools Setup</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>

  <link rel="stylesheet" href="../admin-style.css">

  <style>
    body { background-color: #f8f9fa; }

    .main-container {
      max-width: 900px;
      margin: 30px auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      overflow: hidden;
    }

    .header-bar {
      background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%);
      padding: 20px 25px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .content-area { padding: 30px; }

    .tool-card {
      background: #fff;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.2s;
    }
    .tool-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      border-color: #d6d6d6;
    }
    
    .form-switch .form-check-input {
      width: 3em;
      height: 1.5em;
      cursor: pointer;
    }
    .legal-warning {
            font-size: 0.75rem; 
            color: #dc3545; 
            font-weight: 600; 
            text-align: center; 
            margin-top: 30px;
        }
  </style>
<script>
    // SAFETY: Prevent crash if Analytics is blocked
    window.trackEvent = window.trackEvent || function() {};
</script>
</head>
<body>

  <div id="loadingOverlay">
    <div class="spinner-border text-primary mb-3" role="status"></div>
    <div class="text-muted fw-bold">Loading Preferences...</div>
  </div>

  <div class="container px-3">
    <div class="main-container">
      
      <div class="header-bar">
        <div>
          <h4 class="mb-0 fw-bold"><i class="bi bi-clipboard-check"></i> Diagnostic Tools</h4>
          <small class="opacity-75">Enable/Disable Tools for Your Institution</small>
        </div>
        <a href="../admin.html" class="btn btn-outline-light btn-sm">
          <i class="bi bi-arrow-left"></i> Back
        </a>
      </div>

      <div class="content-area">
        
        <div class="alert alert-light border shadow-sm mb-4">
          <i class="bi bi-info-circle-fill text-primary me-2"></i>
          Selected tools will appear in the <strong>Clinician Assessment</strong> and <strong>Patient Reported</strong> sections for your users.
        </div>

        <form id="toolsForm">
          
          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-speedometer2 text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">AKPS</h5>
                <small class="text-muted">Australia-modified Karnofsky Performance Status</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_akps">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-clipboard-pulse text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">SPICT</h5>
                <small class="text-muted">Supportive and Palliative Care Indicators Tool</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_spict">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-emoji-frown text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">FLACC</h5>
                <small class="text-muted">Pain Scale for Non-Verbal Patients</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_flacc">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-activity text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">RASS</h5>
                <small class="text-muted">Richmond Agitation-Sedation Scale</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_rass">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-lungs text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">RDOS</h5>
                <small class="text-muted">Respiratory Distress Observation Scale</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_rdos">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-journal-medical text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">IPOS</h5>
                <small class="text-muted">Integrated Palliative care Outcome Scale</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_ipos">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-chat-square-heart text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">HADS</h5>
                <small class="text-muted">Hospital Anxiety and Depression Scale</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_hads">
            </div>
          </div>

          <div class="tool-card">
            <div class="d-flex align-items-center mb-3">
              <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                <i class="bi bi-thermometer text-primary fs-4"></i>
              </div>
              <div>
                <h5 class="mb-0 fw-bold text-primary">Distress Thermometer</h5>
                <small class="text-muted">Psychological Distress Assessment</small>
              </div>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="tool_distress">
            </div>
          </div>

          <div class="d-flex justify-content-end mt-4 pt-3 border-top">
            <button type="submit" class="btn btn-primary px-4 fw-bold">
              <i class="bi bi-save"></i> Save Preferences
            </button>
          </div>
          <p class="legal-warning">For Educational Use Only. Not a Medical Device.<br>Verify all results.</p>

        </form>
      </div>
    </div>
  </div>

  <script>
    // ... Firebase Config (Same as institution.html) ...
    // Placeholder Logic
    document.getElementById('toolsForm').addEventListener('submit', (e) => {
      e.preventDefault();
      alert('Preferences Saved!');
    });
    
    // Simulate Loading
    setTimeout(() => {
      document.getElementById('loadingOverlay').style.display = 'none';
      // Pre-check some boxes
      document.getElementById('tool_akps').checked = true;
      document.getElementById('tool_spict').checked = true;
    }, 800);
  </script>
</body>
</html>
